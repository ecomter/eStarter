<UserControl x:Class="eStarter.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <Grid Background="{DynamicResource MetroBackgroundBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Background="{DynamicResource MetroBackgroundBrush}" BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,1,0">
            <Grid Margin="40,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Header aligned with Back Button (30 margin + 48 button + 12 gap = 90) -->
                <TextBlock Text="PC settings" FontFamily="Segoe UI Light" FontSize="24" Foreground="{DynamicResource MetroForegroundBrush}" Margin="50,38,0,30"/>
                
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
                    <ListBox x:Name="SettingsNav" 
                             Background="Transparent" 
                             BorderThickness="0" 
                             ItemContainerStyle="{StaticResource SettingsListBoxItemStyle}"
                             SelectionChanged="SettingsNav_SelectionChanged">
                        <ListBoxItem Content="Personalization" Tag="Personalization" IsSelected="True"/>
                        <ListBoxItem Content="Search and apps" Tag="SearchApps"/>
                        <ListBoxItem Content="Privacy" Tag="Privacy"/>
                        <ListBoxItem Content="Time and language" Tag="TimeLanguage"/>
                        <ListBoxItem Content="Ease of Access" Tag="EaseAccess"/>
                        <ListBoxItem Content="Update and recovery" Tag="UpdateRecovery"/>
                        <ListBoxItem Content="About" Tag="About"/>
                    </ListBox>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Content Area -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
            <Grid Margin="40,100,40,40">
                <!-- Personalization Panel -->
                <StackPanel x:Name="PersonalizationPanel">
                    <TextBlock Text="Personalization" Style="{StaticResource MetroHeaderTextStyle}"/>
                    
                    <TextBlock Text="Start screen" Style="{StaticResource MetroSubheaderTextStyle}" Margin="0,20,0,10"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <TextBlock Text="Theme" Style="{StaticResource MetroBodyTextStyle}" VerticalAlignment="Center" Width="150"/>
                        <ComboBox Width="200" Height="30" Style="{StaticResource MetroComboBoxStyle}"
                                  SelectedValue="{Binding CurrentSettings.Theme, Mode=TwoWay}"
                                  SelectedValuePath="Content"
                                  SelectionChanged="Theme_SelectionChanged">
                            <ComboBoxItem Content="Dark"/>
                            <ComboBoxItem Content="Light"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,30">
                        <TextBlock Text="Accent Color" Style="{StaticResource MetroBodyTextStyle}" VerticalAlignment="Center" Width="150"/>
                        <ComboBox Width="200" Height="30" Style="{StaticResource MetroComboBoxStyle}"
                                  ItemsSource="{Binding AvailableAccentColors}"
                                  SelectedValue="{Binding CurrentSettings.AccentColor, Mode=TwoWay}"
                                  SelectionChanged="AccentColor_SelectionChanged">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Border Width="20" Height="20" Margin="0,0,10,0" BorderThickness="1" BorderBrush="#33FFFFFF">
                                            <Border.Background>
                                                <SolidColorBrush Color="{Binding}"/>
                                            </Border.Background>
                                        </Border>
                                        <TextBlock Text="{Binding}" VerticalAlignment="Center" Foreground="{DynamicResource MetroForegroundBrush}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,30">
                        <TextBlock Text="Animations" Style="{StaticResource MetroBodyTextStyle}" VerticalAlignment="Center" Width="150"/>
                        <CheckBox IsChecked="True" VerticalAlignment="Center">
                            <TextBlock Text="Enable Windows 8 style animations" Style="{StaticResource MetroBodyTextStyle}" Margin="5,0,0,0"/>
                        </CheckBox>
                    </StackPanel>
                </StackPanel>

                <!-- Update and Recovery Panel -->
                <StackPanel x:Name="UpdateRecoveryPanel" Visibility="Collapsed">
                    <TextBlock Text="Update and recovery" Style="{StaticResource MetroHeaderTextStyle}"/>
                    
                    <TextBlock Text="Recovery" Style="{StaticResource MetroSubheaderTextStyle}" Margin="0,20,0,10"/>
                    <TextBlock Text="Refresh your PC without affecting your files" Style="{StaticResource MetroBodyTextStyle}" Margin="0,0,0,5"/>
                    <TextBlock Text="If your PC isn't running well, you can refresh it without losing your photos, music, videos, and other personal files." 
                               Style="{StaticResource MetroBodyTextStyle}" FontSize="14" Opacity="0.7" Margin="0,0,0,15"/>
                    
                    <Button Content="Get started" 
                            Width="140" Height="36"
                            HorizontalAlignment="Left"
                            Background="#FF333333" Foreground="White" BorderThickness="2" BorderBrush="#FF888888"
                            Cursor="Hand" Margin="0,0,0,30"/>

                    <TextBlock Text="Remove everything and reinstall Windows" Style="{StaticResource MetroSubheaderTextStyle}" Margin="0,10,0,10"/>
                    <TextBlock Text="If you want to recycle your PC or start over completely, you can reset it to its factory settings." 
                               Style="{StaticResource MetroBodyTextStyle}" FontSize="14" Opacity="0.7" Margin="0,0,0,15"/>
                    
                    <Button Content="Reset App Data" 
                            Width="160" Height="36"
                            HorizontalAlignment="Left"
                            Background="#FFCC0000" Foreground="White" BorderThickness="0"
                            Cursor="Hand"
                            Click="ResetAppData_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#FF990000"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#FF660000"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>

                <!-- About Panel -->
                <StackPanel x:Name="AboutPanel" Visibility="Collapsed">
                    <TextBlock Text="About" Style="{StaticResource MetroHeaderTextStyle}"/>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,20">
                        <TextBlock Text="eStarter" Style="{StaticResource MetroSubheaderTextStyle}" Margin="0,0,10,0"/>
                        <TextBlock Text="v1.0.0" Style="{StaticResource MetroBodyTextStyle}" VerticalAlignment="Bottom" Margin="0,0,0,4"/>
                    </StackPanel>

                    <TextBlock Style="{StaticResource MetroBodyTextStyle}" Margin="0,0,0,20">
                        eStarter is a lightweight launcher and app manager designed to make accessing and managing common apps and tasks in a desktop environment faster.
                    </TextBlock>

                    <TextBlock Text="Features" Style="{StaticResource MetroSubheaderTextStyle}" Margin="0,20,0,10"/>
                    <TextBlock Style="{StaticResource MetroBodyTextStyle}">
                        • Quick Launch: One-click launch of common programs via customizable tiles and shortcuts.<LineBreak/>
                        • Personalized Layout: Supports adjusting tile size, color, and arrangement to suit different desktop styles.<LineBreak/>
                        • Simple Installation: Integrated sample app installer for easy demonstration and onboarding.<LineBreak/>
                        • Low Resource Usage: Lightweight architecture balancing speed and responsiveness.
                    </TextBlock>
                </StackPanel>
                
                <!-- Placeholder for other panels -->
                <StackPanel x:Name="PlaceholderPanel" Visibility="Collapsed">
                    <TextBlock x:Name="PlaceholderTitle" Text="Category" Style="{StaticResource MetroHeaderTextStyle}"/>
                    <TextBlock Text="This section is not implemented in this demo." Style="{StaticResource MetroBodyTextStyle}" Margin="0,20,0,0"/>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>