<UserControl x:Class="eStarter.Views.Settings.PersonalizePanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             FontFamily="Microsoft YaHei, Segoe UI">

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="0,0,20,0">
        <StackPanel Margin="0,0,0,40">
            <!-- Header -->
            <TextBlock Text="Personalize" 
                       FontFamily="Microsoft YaHei Light, Segoe UI Light"
                       FontSize="42" FontWeight="Light"
                       Foreground="{DynamicResource MetroForegroundBrush}"
                       Margin="0,0,0,30"/>

            <!-- Lock Screen / Background Section -->
            <TextBlock Text="Lock screen" FontSize="18" FontWeight="Light"
                       Foreground="{DynamicResource MetroAccentBrush}" Margin="0,0,0,15"/>

            <!-- Live Preview -->
            <Grid Height="200" Margin="0,0,0,20">
                <Border x:Name="LockScreenPreview" CornerRadius="4">
                    <Border.Background>
                        <SolidColorBrush x:Name="PreviewBackground" Color="#FF333333"/>
                    </Border.Background>
                    <Grid>
                        <!-- Preview content simulating lock screen -->
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock x:Name="PreviewTime" Text="12:00" 
                                       FontSize="72" FontWeight="Light"
                                       Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Text="Monday, January 1" 
                                       FontSize="16" Foreground="#CCFFFFFF" 
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                        <!-- Accent color bar -->
                        <Border Height="4" VerticalAlignment="Bottom"
                                Background="{DynamicResource MetroAccentBrush}"/>
                    </Grid>
                </Border>
            </Grid>

            <TextBlock Text="Change your picture" FontSize="13" Foreground="{DynamicResource MetroForegroundBrush}" 
                       Opacity="0.8" Margin="0,0,0,10"/>

            <Button Content="Browse" 
                    Width="100" Height="32"
                    HorizontalAlignment="Left"
                    Background="{DynamicResource MetroSeparatorBrush}"
                    Foreground="{DynamicResource MetroForegroundBrush}"
                    BorderThickness="0" Cursor="Hand"
                    Command="{Binding BrowsePictureCommand}">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}" Padding="16,6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{DynamicResource MetroAccentBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>

            <!-- Theme Section -->
            <TextBlock Text="Start screen" FontSize="18" FontWeight="Light"
                       Foreground="{DynamicResource MetroAccentBrush}" Margin="0,30,0,15"/>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                <TextBlock Text="Theme" FontSize="14" Width="150" VerticalAlignment="Center"
                           Foreground="{DynamicResource MetroForegroundBrush}"/>
                <RadioButton Content="Dark" GroupName="Theme" 
                             Style="{StaticResource MetroRadioButtonStyle}"
                             IsChecked="{Binding IsDarkTheme, Mode=TwoWay}"
                             Margin="0,0,20,0"/>
                <RadioButton Content="Light" GroupName="Theme"
                             Style="{StaticResource MetroRadioButtonStyle}"
                             IsChecked="{Binding IsLightTheme, Mode=TwoWay}"/>
            </StackPanel>

            <!-- Accent Color -->
            <TextBlock Text="Accent color" FontSize="14" 
                       Foreground="{DynamicResource MetroForegroundBrush}" Margin="0,10,0,10"/>

            <ItemsControl ItemsSource="{Binding AccentColors}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Width="40" Height="40" Margin="0,0,8,8"
                                Command="{Binding DataContext.ChangeAccentColorCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                CommandParameter="{Binding}"
                                Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="bd" BorderThickness="2" BorderBrush="Transparent">
                                        <Border.Background>
                                            <SolidColorBrush Color="{Binding}"/>
                                        </Border.Background>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bd" Property="BorderBrush" Value="White"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Show Time Toggle -->
            <StackPanel Orientation="Horizontal" Margin="0,20,0,15">
                <TextBlock Text="Show clock on Start" FontSize="14" Width="200" VerticalAlignment="Center"
                           Foreground="{DynamicResource MetroForegroundBrush}"/>
                <ToggleButton Style="{StaticResource MetroToggleSwitchStyle}" 
                              IsChecked="{Binding ShowTime, Mode=TwoWay}"/>
            </StackPanel>

            <!-- Animations Toggle -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                <TextBlock Text="Enable animations" FontSize="14" Width="200" VerticalAlignment="Center"
                           Foreground="{DynamicResource MetroForegroundBrush}"/>
                <ToggleButton Style="{StaticResource MetroToggleSwitchStyle}" 
                              IsChecked="{Binding EnableAnimations, Mode=TwoWay}"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
