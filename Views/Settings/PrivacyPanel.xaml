<UserControl x:Class="eStarter.Views.Settings.PrivacyPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             FontFamily="Microsoft YaHei, Segoe UI">

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="0,0,20,0">
        <StackPanel Margin="0,0,0,40">
            <!-- Header -->
            <TextBlock Text="Privacy" 
                       FontFamily="Microsoft YaHei Light, Segoe UI Light"
                       FontSize="42" FontWeight="Light"
                       Foreground="{DynamicResource MetroForegroundBrush}"
                       Margin="0,0,0,30"/>

            <!-- Privacy Dashboard — live data from kernel -->
            <TextBlock Text="Privacy dashboard" FontSize="18" FontWeight="Light"
                       Foreground="{DynamicResource MetroAccentBrush}" Margin="0,0,0,15"/>

            <TextBlock Text="Apps with active permission grants from the kernel."
                       FontSize="13" Foreground="{DynamicResource MetroForegroundBrush}"
                       Opacity="0.8" Margin="0,0,0,20"/>

            <!-- Dashboard tiles — flat Metro squares, like Start Screen tiles -->
            <StackPanel x:Name="PermissionDashboard">
                <UniformGrid Columns="3" Margin="0,0,0,4">
                    <!-- Location -->
                    <Border Background="{DynamicResource MetroAccentBrush}" Margin="0,0,4,0" Padding="15,18">
                        <StackPanel>
                            <TextBlock Text="&#xE1D1;" FontFamily="Segoe UI Symbol" FontSize="24"
                                       Foreground="White" Margin="0,0,0,8"/>
                            <TextBlock Text="Location" FontSize="13" Foreground="White"/>
                            <TextBlock Text="{Binding LocationAppText}" FontSize="11" 
                                       Foreground="White" Opacity="0.7"/>
                        </StackPanel>
                    </Border>
                    <!-- Camera -->
                    <Border Background="#FF4CAF50" Margin="0,0,4,0" Padding="15,18">
                        <StackPanel>
                            <TextBlock Text="&#xE114;" FontFamily="Segoe UI Symbol" FontSize="24"
                                       Foreground="White" Margin="0,0,0,8"/>
                            <TextBlock Text="Camera" FontSize="13" Foreground="White"/>
                            <TextBlock Text="{Binding CameraAppText}" FontSize="11" 
                                       Foreground="White" Opacity="0.7"/>
                        </StackPanel>
                    </Border>
                    <!-- Microphone -->
                    <Border Background="#FFFF9800" Padding="15,18">
                        <StackPanel>
                            <TextBlock Text="&#xE1D6;" FontFamily="Segoe UI Symbol" FontSize="24"
                                       Foreground="White" Margin="0,0,0,8"/>
                            <TextBlock Text="Microphone" FontSize="13" Foreground="White"/>
                            <TextBlock Text="{Binding MicrophoneAppText}" FontSize="11" 
                                       Foreground="White" Opacity="0.7"/>
                        </StackPanel>
                    </Border>
                </UniformGrid>
                <UniformGrid Columns="3" Margin="0,0,0,30">
                    <!-- Files -->
                    <Border Background="#FF2196F3" Margin="0,0,4,0" Padding="15,18">
                        <StackPanel>
                            <TextBlock Text="&#xE188;" FontFamily="Segoe UI Symbol" FontSize="24"
                                       Foreground="White" Margin="0,0,0,8"/>
                            <TextBlock Text="Files" FontSize="13" Foreground="White"/>
                            <TextBlock Text="{Binding FileSystemAppText}" FontSize="11" 
                                       Foreground="White" Opacity="0.7"/>
                        </StackPanel>
                    </Border>
                    <!-- Network -->
                    <Border Background="#FF9C27B0" Margin="0,0,4,0" Padding="15,18">
                        <StackPanel>
                            <TextBlock Text="&#xE12B;" FontFamily="Segoe UI Symbol" FontSize="24"
                                       Foreground="White" Margin="0,0,0,8"/>
                            <TextBlock Text="Network" FontSize="13" Foreground="White"/>
                            <TextBlock Text="{Binding NetworkAppText}" FontSize="11" 
                                       Foreground="White" Opacity="0.7"/>
                        </StackPanel>
                    </Border>
                    <!-- IPC -->
                    <Border Background="#FF00BCD4" Padding="15,18">
                        <StackPanel>
                            <TextBlock Text="&#xE134;" FontFamily="Segoe UI Symbol" FontSize="24"
                                       Foreground="White" Margin="0,0,0,8"/>
                            <TextBlock Text="IPC" FontSize="13" Foreground="White"/>
                            <TextBlock Text="{Binding IpcAppText}" FontSize="11" 
                                       Foreground="White" Opacity="0.7"/>
                        </StackPanel>
                    </Border>
                </UniformGrid>
            </StackPanel>

            <!-- Global Permission Policies -->
            <TextBlock Text="Permission manager" FontSize="18" FontWeight="Light"
                       Foreground="{DynamicResource MetroAccentBrush}" Margin="0,0,0,5"/>

            <TextBlock Text="Global policies — disabling a permission revokes it from all running apps."
                       FontSize="13" Foreground="{DynamicResource MetroForegroundBrush}"
                       Opacity="0.8" Margin="0,0,0,15"/>

            <StackPanel>
                <!-- Location -->
                <Border BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,0,1" Padding="0,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Width="40" Height="40" Background="{DynamicResource MetroAccentBrush}">
                            <TextBlock Text="&#xE1D1;" FontFamily="Segoe UI Symbol" FontSize="20"
                                       Foreground="White"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock Text="Location" FontSize="14"
                                       Foreground="{DynamicResource MetroForegroundBrush}"/>
                            <TextBlock Text="Allow apps to access your location" FontSize="11"
                                       Foreground="{DynamicResource MetroForegroundBrush}" Opacity="0.6"/>
                        </StackPanel>
                        <ToggleButton Grid.Column="2" Style="{StaticResource MetroToggleSwitchStyle}"
                                      IsChecked="{Binding AllowLocation, Mode=TwoWay}"/>
                    </Grid>
                </Border>

                <!-- Camera -->
                <Border BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,0,1" Padding="0,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Width="40" Height="40" Background="#FF4CAF50">
                            <TextBlock Text="&#xE114;" FontFamily="Segoe UI Symbol" FontSize="20"
                                       Foreground="White"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock Text="Camera" FontSize="14"
                                       Foreground="{DynamicResource MetroForegroundBrush}"/>
                            <TextBlock Text="Allow apps to take photos and videos" FontSize="11"
                                       Foreground="{DynamicResource MetroForegroundBrush}" Opacity="0.6"/>
                        </StackPanel>
                        <ToggleButton Grid.Column="2" Style="{StaticResource MetroToggleSwitchStyle}"
                                      IsChecked="{Binding AllowCamera, Mode=TwoWay}"/>
                    </Grid>
                </Border>

                <!-- Microphone -->
                <Border BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,0,1" Padding="0,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Width="40" Height="40" Background="#FFFF9800">
                            <TextBlock Text="&#xE1D6;" FontFamily="Segoe UI Symbol" FontSize="20"
                                       Foreground="White"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock Text="Microphone" FontSize="14"
                                       Foreground="{DynamicResource MetroForegroundBrush}"/>
                            <TextBlock Text="Allow apps to record audio" FontSize="11"
                                       Foreground="{DynamicResource MetroForegroundBrush}" Opacity="0.6"/>
                        </StackPanel>
                        <ToggleButton Grid.Column="2" Style="{StaticResource MetroToggleSwitchStyle}"
                                      IsChecked="{Binding AllowMicrophone, Mode=TwoWay}"/>
                    </Grid>
                </Border>

                <!-- Files -->
                <Border BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,0,1" Padding="0,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Width="40" Height="40" Background="#FF2196F3">
                            <TextBlock Text="&#xE188;" FontFamily="Segoe UI Symbol" FontSize="20"
                                       Foreground="White"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock Text="Files and storage" FontSize="14"
                                       Foreground="{DynamicResource MetroForegroundBrush}"/>
                            <TextBlock Text="Allow apps to read and write files" FontSize="11"
                                       Foreground="{DynamicResource MetroForegroundBrush}" Opacity="0.6"/>
                        </StackPanel>
                        <ToggleButton Grid.Column="2" Style="{StaticResource MetroToggleSwitchStyle}"
                                      IsChecked="{Binding AllowFileSystem, Mode=TwoWay}"/>
                    </Grid>
                </Border>

                <!-- Network -->
                <Border BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,0,1" Padding="0,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Width="40" Height="40" Background="#FF9C27B0">
                            <TextBlock Text="&#xE12B;" FontFamily="Segoe UI Symbol" FontSize="20"
                                       Foreground="White"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock Text="Network access" FontSize="14"
                                       Foreground="{DynamicResource MetroForegroundBrush}"/>
                            <TextBlock Text="Allow apps to connect to the internet" FontSize="11"
                                       Foreground="{DynamicResource MetroForegroundBrush}" Opacity="0.6"/>
                        </StackPanel>
                        <ToggleButton Grid.Column="2" Style="{StaticResource MetroToggleSwitchStyle}"
                                      IsChecked="{Binding AllowNetwork, Mode=TwoWay}"/>
                    </Grid>
                </Border>

                <!-- IPC -->
                <Border BorderBrush="{DynamicResource MetroSeparatorBrush}" BorderThickness="0,0,0,1" Padding="0,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Width="40" Height="40" Background="#FF00BCD4">
                            <TextBlock Text="&#xE134;" FontFamily="Segoe UI Symbol" FontSize="20"
                                       Foreground="White"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock Text="Inter-app communication" FontSize="14"
                                       Foreground="{DynamicResource MetroForegroundBrush}"/>
                            <TextBlock Text="Allow apps to communicate with each other" FontSize="11"
                                       Foreground="{DynamicResource MetroForegroundBrush}" Opacity="0.6"/>
                        </StackPanel>
                        <ToggleButton Grid.Column="2" Style="{StaticResource MetroToggleSwitchStyle}"
                                      IsChecked="{Binding AllowIpc, Mode=TwoWay}"/>
                    </Grid>
                </Border>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
